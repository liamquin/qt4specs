<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2025/">2025</a>, <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="minutes—01-28"><h2>QT4 CG meeting 107 draft minutes<span class="toot-id"> #minutes—01-28</span></h2><div class="pubdate">28 Jan at 17:20:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2025/01-28">https://qt4cg.org/meeting/minutes/2025/01-28</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-1725"><h2>Issue #1725 closed<span class="toot-id"> #closed-1725</span></h2><div class="pubdate">28 Jan at 17:10:39 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1725">https://github.com/qt4cg/qtspecs/issues/1725</a></div><p>Position of duplicates in ordered maps</p></div>
<div class="toot" id="closed-1727"><h2>Issue #1727 closed<span class="toot-id"> #closed-1727</span></h2><div class="pubdate">28 Jan at 17:10:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1727">https://github.com/qt4cg/qtspecs/pull/1727</a></div><p>1725 Define more detailed rules for duplicates in maps</p></div>
<div class="toot" id="closed-1485"><h2>Issue #1485 closed<span class="toot-id"> #closed-1485</span></h2><div class="pubdate">28 Jan at 17:07:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1485">https://github.com/qt4cg/qtspecs/issues/1485</a></div><p>Record declarations in XSLT</p></div>
<div class="toot" id="closed-1708"><h2>Issue #1708 closed<span class="toot-id"> #closed-1708</span></h2><div class="pubdate">28 Jan at 17:07:52 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1708">https://github.com/qt4cg/qtspecs/pull/1708</a></div><p>1485 Add xsl:record-type declaration</p></div>
<div class="toot" id="closed-76"><h2>Issue #76 closed<span class="toot-id"> #closed-76</span></h2><div class="pubdate">28 Jan at 17:06:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/76">https://github.com/qt4cg/qtspecs/issues/76</a></div><p>non-deterministic time</p></div>
<div class="toot" id="closed-747"><h2>Issue #747 closed<span class="toot-id"> #closed-747</span></h2><div class="pubdate">28 Jan at 17:06:16 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/747">https://github.com/qt4cg/qtspecs/issues/747</a></div><p>QName literals</p></div>
<div class="toot" id="closed-885"><h2>Issue #885 closed<span class="toot-id"> #closed-885</span></h2><div class="pubdate">28 Jan at 17:06:09 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/885">https://github.com/qt4cg/qtspecs/issues/885</a></div><p>fn:uuid</p></div>
<div class="toot" id="closed-981"><h2>Issue #981 closed<span class="toot-id"> #closed-981</span></h2><div class="pubdate">28 Jan at 17:05:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/981">https://github.com/qt4cg/qtspecs/issues/981</a></div><p>Identify optional arguments in callback functions</p></div>
<div class="toot" id="closed-998"><h2>Issue #998 closed<span class="toot-id"> #closed-998</span></h2><div class="pubdate">28 Jan at 17:05:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/998">https://github.com/qt4cg/qtspecs/issues/998</a></div><p>regular expression addition - lookbehind assertions and lookahead assertions</p></div>
<div class="toot" id="closed-1720"><h2>Issue #1720 closed<span class="toot-id"> #closed-1720</span></h2><div class="pubdate">28 Jan at 17:04:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1720">https://github.com/qt4cg/qtspecs/issues/1720</a></div><p>Grammar overhaul</p></div>
<div class="toot" id="closed-1732"><h2>Issue #1732 closed<span class="toot-id"> #closed-1732</span></h2><div class="pubdate">28 Jan at 17:04:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1732">https://github.com/qt4cg/qtspecs/pull/1732</a></div><p>1720 grammar simplification</p></div>
<div class="toot" id="closed-1069"><h2>Issue #1069 closed<span class="toot-id"> #closed-1069</span></h2><div class="pubdate">28 Jan at 17:03:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1069">https://github.com/qt4cg/qtspecs/issues/1069</a></div><p>fn:ucd</p></div>
<div class="toot" id="closed-1124"><h2>Issue #1124 closed<span class="toot-id"> #closed-1124</span></h2><div class="pubdate">28 Jan at 17:03:17 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1124">https://github.com/qt4cg/qtspecs/issues/1124</a></div><p>Formatting XPath/XQuery: Preferences, Conventions</p></div>
<div class="toot" id="closed-1252"><h2>Issue #1252 closed<span class="toot-id"> #closed-1252</span></h2><div class="pubdate">28 Jan at 17:03:09 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1252">https://github.com/qt4cg/qtspecs/issues/1252</a></div><p>Add a new function `fn:html-doc`</p></div>
<div class="toot" id="closed-1728"><h2>Issue #1728 closed<span class="toot-id"> #closed-1728</span></h2><div class="pubdate">28 Jan at 17:01:15 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1728">https://github.com/qt4cg/qtspecs/pull/1728</a></div><p>Fix CSS for production tables</p></div>
<div class="toot" id="created-1735"><h2>Pull request #1735 created<span class="toot-id"> #created-1735</span></h2><div class="pubdate">27 Jan at 17:09:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1735">https://github.com/qt4cg/qtspecs/pull/1735</a></div><details><summary>1341 Drop $position callback from many functions</summary><div class="markup"><p>Responding to the discussion in #1341, this (somewhat experimental) PR explores the possibility of dropping the optional
$position argument to the callback of many higher-order functions such as some(), every(), filter(), for-each(), fold-left(), fold-right(). Instead, it provides the option to wrap the input sequence in a call of numbered-items() which replaces each item in the input with an (item, position) pair.</p>
<p>I've done this only (so far) for higher-order sequence functions, but the intent is that the same could be done for arrays and (potentially) maps.</p>
<p>I left the position argument in place for a few functions where losing it seemed to cause genuine inconvenience:</p>
<ul>
<li>partition(), where the function wraps the supplied items into arrays, and you don't want to have to remove the positions afterwards</li>
<li>subsequence-where(), where many use cases are likely to use positional information</li>
<li>for-each-pair(), where there are two input sequences and it seems clumsy to associate position information with one or the other</li>
</ul>
<p>The main benefit is that we provide one basic mechanism which is automatically available everywhere, which means we don't have to have debates about whether or not there is a use case for adding position information to (say) fold-left or scan-right.</p>
<p>A further benefit is that the functions defined for sequences automatically become available for arrays and maps. I haven't yet explored the impact on maps and arrays; I will wait first to see what the reaction is to this proposal.</p>
</div></details></div>
<div class="toot" id="closed-1730"><h2>Issue #1730 closed<span class="toot-id"> #closed-1730</span></h2><div class="pubdate">27 Jan at 15:12:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1730">https://github.com/qt4cg/qtspecs/issues/1730</a></div><p>Consistency in default handling of map duplicates</p></div>
<div class="toot" id="created-1734"><h2>Pull request #1734 created<span class="toot-id"> #created-1734</span></h2><div class="pubdate">27 Jan at 13:05:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1734">https://github.com/qt4cg/qtspecs/pull/1734</a></div><details><summary>1682 Type promotion and operator mapping</summary><div class="markup"><p>Fix #1682</p>
<p>Moves the relevant parts of the operator mapping table into the sections for Arithmetic Expressions and Value Comparisons. Adds links to the op: functions in F&amp;O.</p>
<p>Drops the Type Promotion appendix, moving the rules inline; and drops the term "type promotion"</p>
<p>Adjusts the specs for sum() and avg() so they are now defined directly in terms of pairwise addition of values.</p>
</div></details></div>
<div class="toot" id="created-1733"><h2>Issue #1733 created<span class="toot-id"> #created-1733</span></h2><div class="pubdate">27 Jan at 10:17:12 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1733">https://github.com/qt4cg/qtspecs/issues/1733</a></div><details><summary>ACTION QT4CG-088-04, reworking the processing model diagram</summary><div class="markup"><p>I have no idea what tool was used to create the current <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-processing-model">processing model diagram</a>. We know it needs to be updated, but I've no particular skill with drawing programs, so I spent half an hour constructing a Graphviz diagram:</p>
<pre><code>digraph Processing_Model {
    subgraph clusterQT4 {
        Exec [label="Execution\nEngine" ];
        XDM [label="XPath Data\nModel"; shape="note" ];
        AST [label="Abstract\nSyntax Tree" ];
        Static [label="Static\nContext"; shape="box3d" ];
        Dynamic [label="Dynamic\nContext"; shape="box3d" ];
        Schema [label="Schema\nDefinitions"; shape="note" ];

        XPath -&gt; AST [label="&nbsp;SQ1" ];
        AST -&gt; AST [label="&nbsp;SQ5" ];
        AST -&gt; Exec [label="&nbsp;DQ1" ];
        Schema -&gt; Static;
        Static -&gt; AST [label="&nbsp;SQ4" ];
        Static -&gt; Dynamic [label="&nbsp;DQ2" ];
        Dynamic -&gt; Exec [ dir="both"; label="&nbsp;DQ5" ];
        Exec -&gt; XDM [ dir="both"; label="&nbsp;DQ4" ];
    }
    XML [ shape="note" ];
    PSVI [ shape="note" ];
    XML -&gt; PSVI [ label="&nbsp;DM1" ];
    PSVI -&gt; XDM  [ label="&nbsp;DM2" ];
    XML -&gt; XDM [ label="&nbsp;DM1" ];

    Direct [ label="&nbsp;Direct\nGeneration" ];
    Direct -&gt; XDM [ label="&nbsp;DM3" ];

    Host [label="Host\nEnvironment" ];
    Host -&gt; Schema [label="&nbsp;SI1" ];
    Host -&gt; Static [label="&nbsp;SQ2" ];
    Host -&gt; Dynamic [label="&nbsp;DQ3" ];

    Serialize [ shape="note" ];
    XDM -&gt; Serialize [ label="&nbsp;DM4" ];
}
</code></pre>
<p>It looks something like this:</p>
<p><img src="https://github.com/user-attachments/assets/7ae82045-2e28-4db2-afdc-b69cb0f72bdb" alt="Image"></p>
<p>Is this worth pursuing, or is that just half an hour of my life I'll never get back?</p>
</div></details></div>
<div class="toot" id="agenda-01-28"><h2>QT4 CG meeting 107 draft agenda<span class="toot-id"> #agenda-01-28</span></h2><div class="pubdate">27 Jan at 09:30:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2025/01-28">https://qt4cg.org/meeting/agenda/2025/01-28</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-1732"><h2>Pull request #1732 created<span class="toot-id"> #created-1732</span></h2><div class="pubdate">26 Jan at 22:12:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1732">https://github.com/qt4cg/qtspecs/pull/1732</a></div><details><summary>1720 grammar simplification</summary><div class="markup"><p>This PR primarily affects the grammar file, simplifying it to remove most of the material that is only there to support the generation of a JavaCC parser (which has probably not been achievable since XPath/XQuery 2.0).</p>
<p>The section of the grammar that defines the binary operators starting with <code>OrExpr</code> is now expressed using conventional production rules, rather than the precedence-based grammar previously used. This allows deletion of some convoluted code in grammar2spec.xsl.</p>
<p>The DTD for the grammar file is revised to exclude many constructs that are no longer used.</p>
<p>Many simple token definitions (especially those that consist of a simple constant string) have been inlined.</p>
<p>Fix #1720</p>
</div></details></div>
<div class="toot" id="created-1731"><h2>Pull request #1731 created<span class="toot-id"> #created-1731</span></h2><div class="pubdate">25 Jan at 23:20:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1731">https://github.com/qt4cg/qtspecs/pull/1731</a></div><details><summary>1719 drop shared spec from build</summary><div class="markup"><p>Removes tasks from the gradle build, and associated stylesheets, that are there only to construct the "shared XPath/XQuery specification" which is no longer used by the editors or made visible to readers.</p>
<p>Also fixes a couple of link errors/warnings in the build.</p>
<p>Fix #1719</p>
</div></details></div>
<div class="toot" id="created-1730"><h2>Issue #1730 created<span class="toot-id"> #created-1730</span></h2><div class="pubdate">25 Jan at 18:03:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1730">https://github.com/qt4cg/qtspecs/issues/1730</a></div><details><summary>Consistency in default handling of map duplicates</summary><div class="markup"><p>In 3.1:</p>
<ul>
<li><code>map:merge()</code> defaults to duplicates = use-first</li>
<li><code>xsl:map</code> defaults to duplicates = reject</li>
</ul>
<p>In 4.0</p>
<ul>
<li><code>map:build</code> defaults to duplicates = combine</li>
<li><code>map:of-pairs</code> defaults to duplicates = combine</li>
</ul>
<p>Should we try to align the defaults?</p>
</div></details></div>
<div class="toot" id="created-1729"><h2>Issue #1729 created<span class="toot-id"> #created-1729</span></h2><div class="pubdate">24 Jan at 22:04:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1729">https://github.com/qt4cg/qtspecs/issues/1729</a></div><details><summary>Grammar problems introduced by #1721</summary><div class="markup"><p>Some productions of the XQuery 4.0 grammar were made obsolete by recent changes, but still occur in the document:</p>
<ul>
<li><code>StringConstructorStart</code></li>
<li><code>StringInterpolationStart</code></li>
<li><code>StringInterpolationEnd</code></li>
<li><code>StringConstructorEnd</code></li>
<li><code>TagQName</code></li>
<li><code>EndTagQName</code></li>
<li><code>ProcessingInstructionStart</code></li>
<li><code>ProcessingInstructionEnd</code></li>
<li><code>DirCommentContentChar</code></li>
<li><code>DirCommentContentDashChar</code></li>
</ul>
<p>Also, the replacement of <code>declare record</code> by <code>declare type record</code> has intoduced a new ambiguity. For example, with the input</p>
<pre><code class="language-xquery">declare type A as xs:integer;
declare type record as (A);
</code></pre>
<p>it remains unclear whether the second line declares a  type named "record", in which case</p>
<pre><code class="language-xquery">42 instance of record
</code></pre>
<p>or a type named "as", where</p>
<pre><code class="language-xquery">{'A': 42} instance of as
</code></pre>
<p>My proposal would be return to <code>declare record</code>. There are also 13 examples in the document using <code>declare record</code>.</p>
</div></details></div>
<div class="toot" id="closed-1723"><h2>Issue #1723 closed<span class="toot-id"> #closed-1723</span></h2><div class="pubdate">24 Jan at 21:00:42 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1723">https://github.com/qt4cg/qtspecs/issues/1723</a></div><p>`ThenAction` left over after removal of `BracedActions`</p></div>
<div class="toot" id="created-1728"><h2>Pull request #1728 created<span class="toot-id"> #created-1728</span></h2><div class="pubdate">24 Jan at 13:15:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1728">https://github.com/qt4cg/qtspecs/pull/1728</a></div><details><summary>Fix CSS for production tables</summary><div class="markup"><p>This PR removes some extraneous space between the rows and columns in the production tables (cellspacing) and turns off the odd grey background on comments. (I don't think the grey backbround was helping any, but if you disagree...)</p>
</div></details></div>
<div class="toot" id="closed-1721"><h2>Issue #1721 closed<span class="toot-id"> #closed-1721</span></h2><div class="pubdate">24 Jan at 13:01:23 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1721">https://github.com/qt4cg/qtspecs/pull/1721</a></div><p>1713 Revise code for generating production rules</p></div>
<div class="toot" id="created-1727"><h2>Pull request #1727 created<span class="toot-id"> #created-1727</span></h2><div class="pubdate">23 Jan at 17:58:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1727">https://github.com/qt4cg/qtspecs/pull/1727</a></div><details><summary>1725 Define more detailed rules for duplicates in maps</summary><div class="markup"><p>Clarifies the rules for how duplicates are handled by map:merge, map:build, map:of-pairs, and xsl:map.</p>
<p>Introduces a callback option for map:merge that is compatible with map:build and map:of-pairs, to increase commonality between all four functions/instructions.</p>
<p>Fix #1725</p>
</div></details></div>
<div class="toot" id="closed-1726"><h2>Issue #1726 closed<span class="toot-id"> #closed-1726</span></h2><div class="pubdate">23 Jan at 16:50:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1726">https://github.com/qt4cg/qtspecs/pull/1726</a></div><p>1726 Control order when map input has duplicate keys</p></div></div><p>See 3500
            more statuses in yearly archives.</p></article></main></body></html>