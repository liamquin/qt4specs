<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2025/">2025</a>, <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="agenda-01-07"><h2>QT4 CG meeting 104 draft agenda<span class="toot-id"> #agenda-01-07</span></h2><div class="pubdate">07 Jan at 10:11:30 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2025/01-07">https://qt4cg.org/meeting/agenda/2025/01-07</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-1681"><h2>Issue #1681 created<span class="toot-id"> #created-1681</span></h2><div class="pubdate">05 Jan at 23:38:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1681">https://github.com/qt4cg/qtspecs/issues/1681</a></div><details><summary> Δ in the table of contents</summary><div class="markup"><p>All the spec say in their first changes section:</p>
<blockquote>
<p>Sections with significant changes are marked Δ in the table of contents.</p>
</blockquote>
<p>However, these markers are present only in the F&amp;O specification.</p>
</div></details></div>
<div class="toot" id="created-1680"><h2>Issue #1680 created<span class="toot-id"> #created-1680</span></h2><div class="pubdate">05 Jan at 19:27:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1680">https://github.com/qt4cg/qtspecs/issues/1680</a></div><details><summary>Ambiguous `switch` syntax</summary><div class="markup"><p>Unless I am overlooking some constraint preventing this, an ambiguity has been introduced to the XQuery 4.0 grammar by allowing the <code>SwitchComparand</code> to be omitted per #671/#678.</p>
<p>Here is an example of an ambiguous expression:</p>
<pre><code class="language-xquery">switch case A return switch case B return switch case C return D default return E default return F
</code></pre>
<p>It can be parsed along the lines of</p>
<pre><code class="language-xquery">switch
case A return SWITCH 
case B return switch
              case C return D 
              default return E 
default return F
</code></pre>
<p>but also like the following</p>
<pre><code class="language-xquery">switch
case A return switch
              case B return SWITCH
              case C return D
              default return E
default return F
</code></pre>
</div></details></div>
<div class="toot" id="created-1679"><h2>Pull request #1679 created<span class="toot-id"> #created-1679</span></h2><div class="pubdate">05 Jan at 14:28:41 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1679">https://github.com/qt4cg/qtspecs/pull/1679</a></div><details><summary>1678 Define element(E,T) and attribute(A,T) in terms of "derives-from"</summary><div class="markup"><p>Fix #1678</p>
</div></details></div>
<div class="toot" id="created-1678"><h2>Issue #1678 created<span class="toot-id"> #created-1678</span></h2><div class="pubdate">05 Jan at 00:24:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1678">https://github.com/qt4cg/qtspecs/issues/1678</a></div><details><summary>Semantics of element(N, T) where T is a union type</summary><div class="markup"><p>The semantics of <code>element(N, T)</code> say that to get a match, the type annotation A of the element must be derived from T <em>by restriction</em>. This means you will never get a match if T is a union type.</p>
<p>Furthermore, if T is a complex type, there is no match if the type annotation is a complex type derived by extension from T.</p>
<p>I think this is a simple error in the spec. It should say that derived-from(A, T) must be true. The derived-from() relationship handles union types and derivation by extension correctly.</p>
<p>We do use <code>derived-from</code> when specifying subtyping. This means that an element E can be an instance of <code>element(E, xs:integer)</code>, and not be an instance of <code>element(E, xs:numeric)</code>, even though  <code>element(E, xs:integer)</code>, is a subtype of <code>element(E, xs:numeric)</code>.</p>
<p>The error seems to have crept in when the rules were redrafted for 4.0. Up to and including 3.1, the semantics of ElementTest and AttributeTest reference the derived-from() function.</p>
</div></details></div>
<div class="toot" id="created-1677"><h2>Pull request #1677 created<span class="toot-id"> #created-1677</span></h2><div class="pubdate">04 Jan at 18:32:51 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1677">https://github.com/qt4cg/qtspecs/pull/1677</a></div><details><summary>1675 Fixes for CSV parsing</summary><div class="markup"><p>Fix #1675</p>
</div></details></div>
<div class="toot" id="created-1676"><h2>Pull request #1676 created<span class="toot-id"> #created-1676</span></h2><div class="pubdate">03 Jan at 20:08:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1676">https://github.com/qt4cg/qtspecs/pull/1676</a></div><details><summary>1621 Capabilities of Collations</summary><div class="markup"><p>Fix #1621</p>
<p>This PR is largely editorial, except that it makes a substantive change to the <code>fn:collation-available</code> function.</p>
</div></details></div>
<div class="toot" id="created-1675"><h2>Issue #1675 created<span class="toot-id"> #created-1675</span></h2><div class="pubdate">03 Jan at 16:02:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1675">https://github.com/qt4cg/qtspecs/issues/1675</a></div><p>CSV parsing</p></div>
<div class="toot" id="created-1674"><h2>Pull request #1674 created<span class="toot-id"> #created-1674</span></h2><div class="pubdate">03 Jan at 13:32:17 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1674">https://github.com/qt4cg/qtspecs/pull/1674</a></div><details><summary>1662 Allow composite sort keys in xsl:sort</summary><div class="markup"><p>Fix #1662</p>
</div></details></div>
<div class="toot" id="created-1673"><h2>Pull request #1673 created<span class="toot-id"> #created-1673</span></h2><div class="pubdate">03 Jan at 01:07:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1673">https://github.com/qt4cg/qtspecs/pull/1673</a></div><details><summary>1407 TOC structure for types</summary><div class="markup"><p>Addresses part of #1407:</p>
<ul>
<li>Improves the section headings and levels for the Types and Subtyping sections</li>
<li>Level-4 headings (and level-5 if there were any) are no longer omitted from the F&amp;O TOC.</li>
</ul>
<p>There are other suggestions in #1407 regarding the spec prose that are not (yet) implemented.</p>
<p>Changing the CSS to adjust presentation of level-4 and level-5 headings in the TOC is way above my level of CSS competence, there's some very elaborate logic in this area, and anyone who wants to tackle it is welcome.</p>
</div></details></div>
<div class="toot" id="created-1672"><h2>Issue #1672 created<span class="toot-id"> #created-1672</span></h2><div class="pubdate">02 Jan at 20:50:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1672">https://github.com/qt4cg/qtspecs/issues/1672</a></div><details><summary>array:values, map:values: Alternatives</summary><div class="markup"><p>We still have <code>array:values</code> and <code>map:values</code> in the spec, even though the names were considered suboptimal: When retrieving values of struct(ure(d item))s, one would expect to get not a flat, but a structured result.</p>
<p>A while ago, the <code>items</code> key specifier was introduced to mimic the classical wildcard lookup syntax (making <code>$A?*</code> and <code>$A?items::*</code> equivalent), and I suggest renaming our functions to <code>array:items</code> and <code>map:items</code>:</p>
<pre><code class="language-xquery">  $map?*
≍ map:items($map)

  $array?*
≍ array:items($array)
</code></pre>
<p>Plan&nbsp;B could be to extend the second argument of <code>map:get</code> (and <code>array:get</code>) to also accept predicate functions…</p>
<pre><code class="language-xquery">map:get(
  $map  as map(*),	
  $key  as (xs:anyAtomicType|fn(xs:anyAtomicType) as xs:boolean?)
) as item()*
</code></pre>
<p>…which would allow us to write:</p>
<pre><code class="language-xquery">  $map?a
≍ $map =&gt; map:get('a')
≍ $map =&gt; map:get(fn { . = 'a' })

  $map?(1 to 5)
≍ $map =&gt; map:get(fn { . = 1 to 5 })

  $map?*
≍ $map =&gt; map:get(true#0)

(: and things like :)
$map =&gt; map:get(fn { . mod 2 = 1 })
</code></pre>
</div></details></div>
<div class="toot" id="created-1671"><h2>Pull request #1671 created<span class="toot-id"> #created-1671</span></h2><div class="pubdate">01 Jan at 16:50:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1671">https://github.com/qt4cg/qtspecs/pull/1671</a></div><details><summary>1261 New fn:divide-decimals() function</summary><div class="markup"><p>Fix #1261</p>
</div></details></div>
<div class="toot" id="created-1670"><h2>Pull request #1670 created<span class="toot-id"> #created-1670</span></h2><div class="pubdate">01 Jan at 12:51:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1670">https://github.com/qt4cg/qtspecs/pull/1670</a></div><p>Action QT4CS-097-02: Enable xtermref links to XSD SCM property names</p></div>
<div class="toot" id="created-1669"><h2>Pull request #1669 created<span class="toot-id"> #created-1669</span></h2><div class="pubdate">31 Dec at 17:15:00 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1669">https://github.com/qt4cg/qtspecs/pull/1669</a></div><details><summary>1667 Revise handling of non-XML characters in parse-json</summary><div class="markup"><p>Fix #1667</p>
</div></details></div>
<div class="toot" id="closed-1659"><h2>Issue #1659 closed<span class="toot-id"> #closed-1659</span></h2><div class="pubdate">27 Dec at 08:23:12 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1659">https://github.com/qt4cg/qtspecs/issues/1659</a></div><p>List-valued options represented as arrays</p></div>
<div class="toot" id="created-1668"><h2>Pull request #1668 created<span class="toot-id"> #created-1668</span></h2><div class="pubdate">22 Dec at 22:31:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1668">https://github.com/qt4cg/qtspecs/pull/1668</a></div><details><summary>Minor copy edits (no issue raised)</summary><div class="markup"><p>Various small copy edits.</p>
<p>Also adds summary descriptions to record definitions in the function catalog, which requires a schema and stylesheet change.</p>
</div></details></div>
<div class="toot" id="created-1667"><h2>Issue #1667 created<span class="toot-id"> #created-1667</span></h2><div class="pubdate">20 Dec at 07:28:15 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1667">https://github.com/qt4cg/qtspecs/issues/1667</a></div><details><summary>Invalid XML characters in JSON input</summary><div class="markup"><p>We have changed the data model (§2.8.4) (see PR #546) so that implementations may allow characters that are not valid XML characters.</p>
<p>We have not explored the impact of this change on parse-json(), which is one of the obvious places where non-XML characters may arise. For example, JSON allows unescaped C1 control characters.</p>
<p>(Note however that the data model explicitly bans unpaired surrogates, and I think that rule should apply to parse-json() even though the JSON grammar allows it).</p>
<p>Hopefully it only requires clarification notes to be added to the spec, and not any substantive change.</p>
</div></details></div>
<div class="toot" id="closed-1657"><h2>Issue #1657 closed<span class="toot-id"> #closed-1657</span></h2><div class="pubdate">19 Dec at 17:21:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1657">https://github.com/qt4cg/qtspecs/pull/1657</a></div><p>1624 Add note explaining nodetest subtyping</p></div>
<div class="toot" id="closed-1664"><h2>Issue #1664 closed<span class="toot-id"> #closed-1664</span></h2><div class="pubdate">19 Dec at 16:53:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1664">https://github.com/qt4cg/qtspecs/pull/1664</a></div><p>1659 option conventions sequences as arrays</p></div>
<div class="toot" id="created-1666"><h2>Pull request #1666 created<span class="toot-id"> #created-1666</span></h2><div class="pubdate">19 Dec at 16:50:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1666">https://github.com/qt4cg/qtspecs/pull/1666</a></div><details><summary>1649 result of function annotations</summary><div class="markup"><p>Brings the spec of fn:function-annotations into line with the test cases and examples</p>
<p>Fix #1649</p>
</div></details></div>
<div class="toot" id="created-1665"><h2>Pull request #1665 created<span class="toot-id"> #created-1665</span></h2><div class="pubdate">19 Dec at 16:37:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1665">https://github.com/qt4cg/qtspecs/pull/1665</a></div><details><summary>1650 Tidy up fn:type-of</summary><div class="markup"><p>Drop fn:node-kind from the function catalog so it disappears from the function finder</p>
<p>Correct one example of fn:type-of and add some more examples.</p>
<p>Fix #1650</p>
</div></details></div>
<div class="toot" id="created-1664"><h2>Pull request #1664 created<span class="toot-id"> #created-1664</span></h2><div class="pubdate">19 Dec at 16:25:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1664">https://github.com/qt4cg/qtspecs/pull/1664</a></div><p>1659 option conventions sequences as arrays</p></div>
<div class="toot" id="created-1663"><h2>Pull request #1663 created<span class="toot-id"> #created-1663</span></h2><div class="pubdate">19 Dec at 16:02:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1663">https://github.com/qt4cg/qtspecs/pull/1663</a></div><details><summary>Remove DTD/stylesheet distractions at the top of the schema</summary><div class="markup"><p>We decided to close #374 without further action. This PR just cleans up the relevant schema file by removing the DTD and stylesheet related comment(s).</p>
</div></details></div>
<div class="toot" id="created-1662"><h2>Issue #1662 created<span class="toot-id"> #created-1662</span></h2><div class="pubdate">19 Dec at 14:32:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1662">https://github.com/qt4cg/qtspecs/issues/1662</a></div><details><summary>xsl:sort - add composite sort keys</summary><div class="markup"><p>The fn:sort function supports composite sort keys (where the sort key is a sequence, it's treated as a sequence of sort keys in major to minor order).</p>
<p>We could add the same feature for <code>xsl:sort</code>, perhaps driven by the attribute composite="yes" for compatibility with grouping keys.</p>
</div></details></div>
<div class="toot" id="created-1661"><h2>Issue #1661 created<span class="toot-id"> #created-1661</span></h2><div class="pubdate">18 Dec at 10:17:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1661">https://github.com/qt4cg/qtspecs/issues/1661</a></div><details><summary>QName arguments: also allow strings</summary><div class="markup"><p>In #747, a syntax for QName literals was proposed (<code>Q"prefix:local"</code>). Concerns were raised that the new syntax could be mixed up with the existing <code>Q{URI}local</code> syntax, and that too many syntax variants are confusing.</p>
<p>In attribute and element constructors, it is already possible to supply <code>prefix:local-name</code> and <code>Q{uri}local</code> strings for names:</p>
<pre><code class="language-xquery">element { 'xml:name' } {},
element { 'Q{uri}name' } {}
</code></pre>
<p>With option declarations, it is possible to write:</p>
<pre><code class="language-xquery">declare option output:cdata-section-elements 'xml';
&lt;xml&gt;text&lt;/xml&gt;
</code></pre>
<p>…and it is counterintuitive that <code>serialize($xml, { 'cdata-section-elements': 'xml' })</code> is not legal.</p>
<p>I wonder whether we cannot simply allow both QNames and strings for arguments (and arguments in options) in the existing standard functions. There are fewer cases than I had suspected:</p>
<p>Function | Argument
--- | ---
<code>fn:error</code> | <code>$code</code>
<code>fn:format-number</code> | <code>$options</code>: <code>format-name</code> (can also be <code>xs:NCName</code>)
<code>fn:deep-equal</code> | <code>$options</code>: <code>unordered-elements</code>
<code>fn:serialize</code> | <code>$options</code>: <code>cdata-section-elements</code>, <code>suppress-indentation</code>
<code>fn:function-lookup</code> | <code>$name</code>
<code>fn:load-xquery-module</code> | <code>$options</code>: <code>variables</code>, <code>vendor-options</code>
<code>fn:transform</code> | <code>$options</code>: <code>initial-function</code>, <code>initial-mode</code>, <code>initial-template</code>, ...
<code>fn:elements-to-maps</code> | <code>$options</code>: <code>layouts</code>
<code>fn:schema-type</code> | <code>$name</code></p>
<p>For some options, like the <code>method</code> option of <code>fn:serialize</code>, we already allow both strings and QNames.</p>
</div></details></div>
<div class="toot" id="minutes-12-17"><h2>QT4 CG meeting 103 draft minutes<span class="toot-id"> #minutes-12-17</span></h2><div class="pubdate">17 Dec at 17:30:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2024/12-17">https://qt4cg.org/meeting/minutes/2024/12-17</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="created-1660"><h2>Issue #1660 created<span class="toot-id"> #created-1660</span></h2><div class="pubdate">17 Dec at 17:24:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1660">https://github.com/qt4cg/qtspecs/issues/1660</a></div><details><summary>Further suggestions for fn:path</summary><div class="markup"><p>Several good suggestions for fn:path made at today's review:</p>
<p>(a) For namespaces, an option to identify elements by the result of the name() function - that is, using the actual prefix of each element, rather than a prefix obtained from an externally supplied map
(b) The ability to get a path to a node from a supplied ancestor rather than from the root. (Defaulting perhaps to a path from the context node, though that interacts awkwardly with the default for the target node itself.)
(c) Some more advice and guidance, especially relating to the different use cases depending on whether the path is for use by software or for (diagnostic?) use by human developers.</p>
</div></details></div>
<div class="toot" id="closed-1619"><h2>Issue #1619 closed<span class="toot-id"> #closed-1619</span></h2><div class="pubdate">17 Dec at 17:14:51 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1619">https://github.com/qt4cg/qtspecs/issues/1619</a></div><p>XSLT: keys as maps</p></div>
<div class="toot" id="closed-1622"><h2>Issue #1622 closed<span class="toot-id"> #closed-1622</span></h2><div class="pubdate">17 Dec at 17:14:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1622">https://github.com/qt4cg/qtspecs/pull/1622</a></div><p>1619 Specify XSLT map-for-key function</p></div>
<div class="toot" id="closed-332"><h2>Issue #332 closed<span class="toot-id"> #closed-332</span></h2><div class="pubdate">17 Dec at 17:11:27 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/332">https://github.com/qt4cg/qtspecs/issues/332</a></div><p>Add a namespace uris option to fn:path</p></div></div><p>See 3360
            more statuses in yearly archives.</p></article></main></body></html>