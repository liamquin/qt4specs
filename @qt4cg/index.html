<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2025/">2025</a>, <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="minutes—01-21"><h2>QT4 CG meeting 106 draft minutes<span class="toot-id"> #minutes—01-21</span></h2><div class="pubdate">21 Jan at 17:40:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2025/01-21">https://qt4cg.org/meeting/minutes/2025/01-21</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-1706"><h2>Issue #1706 closed<span class="toot-id"> #closed-1706</span></h2><div class="pubdate">21 Jan at 17:22:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1706">https://github.com/qt4cg/qtspecs/issues/1706</a></div><p>Ambiguous `if` syntax</p></div>
<div class="toot" id="closed-1712"><h2>Issue #1712 closed<span class="toot-id"> #closed-1712</span></h2><div class="pubdate">21 Jan at 17:22:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1712">https://github.com/qt4cg/qtspecs/pull/1712</a></div><p>1706 Drop "else if" and "else" clauses from braced conditionals</p></div>
<div class="toot" id="closed-1685"><h2>Issue #1685 closed<span class="toot-id"> #closed-1685</span></h2><div class="pubdate">21 Jan at 17:20:39 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1685">https://github.com/qt4cg/qtspecs/issues/1685</a></div><p>Pipeline Operator</p></div>
<div class="toot" id="closed-1686"><h2>Issue #1686 closed<span class="toot-id"> #closed-1686</span></h2><div class="pubdate">21 Jan at 17:20:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1686">https://github.com/qt4cg/qtspecs/pull/1686</a></div><p>1685 Pipeline Operator</p></div>
<div class="toot" id="closed-1701"><h2>Issue #1701 closed<span class="toot-id"> #closed-1701</span></h2><div class="pubdate">21 Jan at 17:18:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1701">https://github.com/qt4cg/qtspecs/pull/1701</a></div><p>Add dedication to MSM (action QT4CG-088-01)</p></div>
<div class="toot" id="closed-1705"><h2>Issue #1705 closed<span class="toot-id"> #closed-1705</span></h2><div class="pubdate">21 Jan at 17:16:22 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1705">https://github.com/qt4cg/qtspecs/issues/1705</a></div><p>fn:divide-decimals, fn:round: large precision values</p></div>
<div class="toot" id="closed-1711"><h2>Issue #1711 closed<span class="toot-id"> #closed-1711</span></h2><div class="pubdate">21 Jan at 17:16:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1711">https://github.com/qt4cg/qtspecs/pull/1711</a></div><p>1705 Say that max precision is implementation-defined</p></div>
<div class="toot" id="closed-1710"><h2>Issue #1710 closed<span class="toot-id"> #closed-1710</span></h2><div class="pubdate">21 Jan at 17:14:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1710">https://github.com/qt4cg/qtspecs/pull/1710</a></div><p>1709 Updated type diagrams</p></div>
<div class="toot" id="closed-1606"><h2>Issue #1606 closed<span class="toot-id"> #closed-1606</span></h2><div class="pubdate">21 Jan at 17:13:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1606">https://github.com/qt4cg/qtspecs/issues/1606</a></div><p>Drop named item types other than named record types</p></div>
<div class="toot" id="closed-1494"><h2>Issue #1494 closed<span class="toot-id"> #closed-1494</span></h2><div class="pubdate">21 Jan at 17:13:32 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1494">https://github.com/qt4cg/qtspecs/issues/1494</a></div><p>Records: Introduction?</p></div>
<div class="toot" id="closed-1176"><h2>Issue #1176 closed<span class="toot-id"> #closed-1176</span></h2><div class="pubdate">21 Jan at 17:13:27 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1176">https://github.com/qt4cg/qtspecs/issues/1176</a></div><p>Use fn:parse-uri to check whether a filepath is relative or absolute</p></div>
<div class="toot" id="closed-1700"><h2>Issue #1700 closed<span class="toot-id"> #closed-1700</span></h2><div class="pubdate">21 Jan at 17:11:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1700">https://github.com/qt4cg/qtspecs/pull/1700</a></div><p>Remove some dead .DS_Store files</p></div>
<div class="toot" id="created-1717"><h2>Issue #1717 created<span class="toot-id"> #created-1717</span></h2><div class="pubdate">21 Jan at 16:59:58 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1717">https://github.com/qt4cg/qtspecs/issues/1717</a></div><details><summary>Define focus functions in terms of the pipeline operator</summary><div class="markup"><p>Now that we have accepted the pipeline operator into the language, we can define the semantics of focus functions to take advantage of them, specifically, <code>fn() { EXPR }</code> can be defined to be equivalent to <code>fn($v) { $v -&gt; EXPR }</code> where $v is an otherwise-unused variable name.</p>
</div></details></div>
<div class="toot" id="agenda-01-21"><h2>QT4 CG meeting 106 draft agenda<span class="toot-id"> #agenda-01-21</span></h2><div class="pubdate">21 Jan at 10:30:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2025/01-21">https://qt4cg.org/meeting/agenda/2025/01-21</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-1716"><h2>Issue #1716 created<span class="toot-id"> #created-1716</span></h2><div class="pubdate">20 Jan at 21:13:15 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1716">https://github.com/qt4cg/qtspecs/issues/1716</a></div><details><summary>Variable lookahead needed for `ArrowTarget`</summary><div class="markup"><p>The current grammar definition allows any <code>QName</code> (via <code>EQName</code>) as an <code>ArrowStaticFunction</code>:</p>
<pre><code>ArrowTarget
         ::= ArrowStaticFunction ArgumentList
           | ArrowDynamicFunction PositionalArgumentList
ArrowStaticFunction
         ::= EQName
ArrowDynamicFunction
         ::= VarRef
           | InlineFunctionExpr
           | ParenthesizedExpr 
</code></pre>
<p>This complicates the distinction of the static and dynamic variants of <code>ArrowTarget</code>, as it cannot be done with a fixed number of lookahead tokens. E.g. in an expression starting like this</p>
<pre><code class="language-xquery">A =&gt; fn ( $A, $B, $C, (: ... :) $Z ) { } ( 
</code></pre>
<p>the distinction cannot be made before the left brace is seen. While constructing an LR parser, there is a shift-reduce conflict between shifting <code>fn</code> as a keyword of an <code>InlineFunctionExpr</code>, or reducing <code>fn</code> to the <code>QName</code> of <code>EQName</code>.</p>
<p>This can easily be fixed by adding <code>xgc: reserved-function-names</code> to <code>ArrowStaticFunction</code>, which would also be consistent with other function calls in disallowing reserved function names:</p>
<pre><code>ArrowStaticFunction
         ::= EQName
                          /* xgc: reserved-function-names */		 
</code></pre>
<p>But could not <code>ArrowTarget</code> also be written like the following?</p>
<pre><code>ArrowTarget
         ::= FunctionCall
           | DynamicFunctionCall
</code></pre>
<p>In this case, the <code>xgc: reserved-function-names</code> constraint would be inherited from <code>FunctionCall</code>. It eliminates <code>ArrowStaticFunction</code> and <code>ArrowDynamicFunction</code> and at the same time lifts some restrictions imposed by the current <code>ArrowTarget</code>. It does not cause any LALR(2) conflicts.</p>
</div></details></div>
<div class="toot" id="created-1715"><h2>Issue #1715 created<span class="toot-id"> #created-1715</span></h2><div class="pubdate">20 Jan at 13:59:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1715">https://github.com/qt4cg/qtspecs/issues/1715</a></div><details><summary>Array Lookups: partial removal of out-of-bounds checks</summary><div class="markup"><p>Various QT4 tests imply that the out-of-bounds check for arrays have been removed. An example:</p>
<pre><code class="language-xml">&lt;test-case name="UnaryLookup-005a"&gt;
  &lt;description&gt;Integer subscript into an array: array index too low&lt;/description&gt;
  &lt;created by="Michael Kay" on="2014-11-27"/&gt;
  &lt;modified by="Michael Kay" on="2024-07-22" change="returns () in 4.0"/&gt;
  &lt;dependency type="spec" value="XP40+ XQ40+"/&gt;
  &lt;test&gt;(['a', 'b'], ['c', 'd'])[ ?0 eq 'c']&lt;/test&gt;
  &lt;result&gt;
    &lt;assert-empty/&gt;
  &lt;/result&gt;
&lt;/test-case&gt;
</code></pre>
<p>I believe this is not reflected in the spec yet, or at least it includes examples that need to be updated:</p>
<blockquote>
<p><code>[ "a", "b" ]?3</code> raises a dynamic error <code>err:FOAY0001</code>.</p>
</blockquote>
<p>I guess that #832 would have been the PR with the relevant changes (we have already observed in another issue that some changes of this PR need to survive; see https://github.com/qt4cg/qtspecs/pull/1283#issuecomment-2568330191).</p>
<p>That leads me to the original reason for creating this issue:</p>
<ul>
<li>I think it’s a good idea to drop the range check for array lookups, and it would seem consistent to me to also drop it for dynamic function calls.</li>
<li>As map/array lookups and dynamic function calls are often used interchangeably, <code>$array?0</code> and <code>$array(0)</code> should behave identically.</li>
<li>The <code>FOAY0001</code> error would (and should) still be raised by the array functions, including <code>array:get</code>, <code>array:put</code>, <code>array:remove</code>, or <code>array:insert-before</code>.</li>
</ul>
</div></details></div>
<div class="toot" id="created-1714"><h2>Issue #1714 created<span class="toot-id"> #created-1714</span></h2><div class="pubdate">19 Jan at 23:34:09 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1714">https://github.com/qt4cg/qtspecs/issues/1714</a></div><details><summary>sibling:: axis. Action Item QT4CG-097-03</summary><div class="markup"><p>This issue is a reflection of the following Action Item:</p>
<p><strong>QT4CG-097-03</strong>: DN to proposal an axis for accessing the siblings of a node.</p>
<p>I have prepared a pdf file that contains the updated relevant updated sections from the "<strong><a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html">Xpath 4.0</a></strong>" document:</p>
<ul>
<li>There are no deletions or conflicting changes.</li>
<li>The additions to the text are highlighted in turquoise.</li>
<li>The file that contains all relevant updated sections of the document is at:
https://github.com/dnovatchev/qtspecs/blob/dn-siblings/sibling-axis.pdf</li>
</ul>
<p><strong>If the  above doesn't work</strong>, please try:
https://github.com/dnovatchev/MathPuzzles/blob/master/sibling-axis.pdf</p>
</div></details></div>
<div class="toot" id="created-1713"><h2>Issue #1713 created<span class="toot-id"> #created-1713</span></h2><div class="pubdate">19 Jan at 11:49:13 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1713">https://github.com/qt4cg/qtspecs/issues/1713</a></div><details><summary>Patchy exposition of XSLT type pattern syntax</summary><div class="markup"><p>In XSLT §5.4.2.2 Type Patterns, the exposition of the grammar is "patchy" - it includes some production rules such as <code>FieldDeclaration</code> that are in the subtree of the main production rule (<code>TypePattern</code>) without giving all the intermediate rules that connect this rule to the root.</p>
<p>It's easy enough to correct this by hand, but it would be nice to prevent this happening by automating the generation of these families of grammar rules, perhaps by including all rules in the subtree up to a depth of 3, say. It would also be nice to simply list the productions to be included without having to decide manually which of them should be the principal target of <code>termref</code> references (by being marked with an ID).</p>
</div></details></div>
<div class="toot" id="created-1712"><h2>Pull request #1712 created<span class="toot-id"> #created-1712</span></h2><div class="pubdate">18 Jan at 18:51:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1712">https://github.com/qt4cg/qtspecs/pull/1712</a></div><details><summary>1706 Drop "else if" and "else" clauses from braced conditionals</summary><div class="markup"><p>Fix #1706</p>
</div></details></div>
<div class="toot" id="created-1711"><h2>Pull request #1711 created<span class="toot-id"> #created-1711</span></h2><div class="pubdate">18 Jan at 18:29:32 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1711">https://github.com/qt4cg/qtspecs/pull/1711</a></div><details><summary>1705 Say that max precision is implementation-defined</summary><div class="markup"><p>Applies to fn:round, fn:round-half-to-even, fn:divide-decimals</p>
<p>Fix #1705</p>
</div></details></div>
<div class="toot" id="created-1710"><h2>Pull request #1710 created<span class="toot-id"> #created-1710</span></h2><div class="pubdate">17 Jan at 23:17:00 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1710">https://github.com/qt4cg/qtspecs/pull/1710</a></div><details><summary>1709 Updated type diagrams</summary><div class="markup"><p>Added a few details to the type diagrams: user-defined array, map, and record types; enumeration types; untypedAtomic</p>
</div></details></div>
<div class="toot" id="created-1709"><h2>Issue #1709 created<span class="toot-id"> #created-1709</span></h2><div class="pubdate">17 Jan at 22:44:49 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1709">https://github.com/qt4cg/qtspecs/issues/1709</a></div><details><summary>Extend diagram of item types to include record types etc</summary><div class="markup"><p>I propose to extend the diagram of item types (common to DM and FO) to include more detail of the hierarchy below function types.</p>
</div></details></div>
<div class="toot" id="closed-1617"><h2>Issue #1617 closed<span class="toot-id"> #closed-1617</span></h2><div class="pubdate">17 Jan at 12:55:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1617">https://github.com/qt4cg/qtspecs/pull/1617</a></div><p>1606 Drop named item types, refine named record types, esp in XSLT</p></div>
<div class="toot" id="created-1708"><h2>Pull request #1708 created<span class="toot-id"> #created-1708</span></h2><div class="pubdate">17 Jan at 12:52:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1708">https://github.com/qt4cg/qtspecs/pull/1708</a></div><details><summary>1485 Add xsl:record-type declaration</summary><div class="markup"><p>Adds named record types to XSLT, with much the same spec as for XQuery, but some extra tweaks for handling visibility and overriding.</p>
<p>Fix #1485</p>
</div></details></div>
<div class="toot" id="closed-1707"><h2>Issue #1707 closed<span class="toot-id"> #closed-1707</span></h2><div class="pubdate">17 Jan at 08:58:55 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1707">https://github.com/qt4cg/qtspecs/pull/1707</a></div><p>Fix bug in build dependencies</p></div>
<div class="toot" id="created-1707"><h2>Pull request #1707 created<span class="toot-id"> #created-1707</span></h2><div class="pubdate">17 Jan at 08:58:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1707">https://github.com/qt4cg/qtspecs/pull/1707</a></div><details><summary>Fix bug in build dependencies</summary><div class="markup"><p>Changing <code>xslt.xml</code> didn't actually cause the HTML for the XSLT specification to be rebuilt. 👎</p>
</div></details></div>
<div class="toot" id="created-1706"><h2>Issue #1706 created<span class="toot-id"> #created-1706</span></h2><div class="pubdate">16 Jan at 21:08:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1706">https://github.com/qt4cg/qtspecs/issues/1706</a></div><details><summary>Ambiguous `if` syntax</summary><div class="markup"><p>The optional <code>else</code> in a braced <code>if</code> expression introduces an ambiguity in the XQuery 4.0 grammar.</p>
<p>Here is an example of an ambiguous expression:</p>
<pre><code class="language-xquery">if (A) then if (B) {C} else if (D) {E} else if (F) {G} else {H}
</code></pre>
<p>It can be parsed like this</p>
<pre><code class="language-xquery">if (A) then if (B) {C}                               else {}
       else if (D) {E} else if (F) {G} else {H}
</code></pre>
<p>but also like the following</p>
<pre><code class="language-xquery">if (A) then if (B) {C} else if (D) {E}               else {}
       else if (F) {G} else {H}
</code></pre>
<p>The corresponding part of the grammar is</p>
<pre><code>IfExpr   ::= 'if' '(' Expr ')' ( UnbracedActions | BracedActions )
UnbracedActions
         ::= 'then' ExprSingle 'else' ExprSingle
BracedActions
         ::= ThenAction ElseIfAction* ElseAction?
ThenAction
         ::= EnclosedExpr
ElseIfAction
         ::= 'else' 'if' '(' Expr ')' EnclosedExpr
ElseAction
         ::= 'else' EnclosedExpr
</code></pre>
<p>The ambiguity could be resolved by making the <code>ElseAction</code> in <code>BracedActions</code> mandatory, i.e.:</p>
<pre><code>BracedActions
         ::= ThenAction ElseIfAction* ElseAction
</code></pre>
</div></details></div>
<div class="toot" id="created-1705"><h2>Issue #1705 created<span class="toot-id"> #created-1705</span></h2><div class="pubdate">16 Jan at 15:53:51 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1705">https://github.com/qt4cg/qtspecs/issues/1705</a></div><details><summary>fn:divide-decimals, fn:round: large precision values</summary><div class="markup"><p>We may need to specify what is going to happen if very large (positive and negative) precisions are specified:</p>
<pre><code class="language-xquery">divide-decimals(1, 1, 0x7FFFFFFF)
</code></pre>
<p>A simple implementation in Java to compute the quotient for this function returns an Overflow exception:</p>
<pre><code class="language-java">BigDecimal.ONE.divide(BigDecimal.ONE, 0x7FFFFFFF, RoundingMode.DOWN)
</code></pre>
<p>This also affects <code>fn:round</code>: The query <code>round(1, -0x80000000)</code> seems to behave unexpectedly in existing implementations.</p>
<p>In general, the computation gets very slow for large precision values, and it may not be simple to interrupt such low-level operations, so maybe (if it makes sense, I haven’t really thought about it) we could define precision limits.</p>
</div></details></div>
<div class="toot" id="created-1704"><h2>Issue #1704 created<span class="toot-id"> #created-1704</span></h2><div class="pubdate">16 Jan at 15:09:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1704">https://github.com/qt4cg/qtspecs/issues/1704</a></div><details><summary>Ignore the byte order mark more completely/globally</summary><div class="markup"><p>Following on a discussion with @line-o on the XML.com Slack, I took a peek at the way we deal with the byte order mark in Functions and Operators. We seem to be explicit about it in a couple of JSON functions but not elsewhere. I think we should assert that the byte order mark is explicitly ignored in all of the input functions (json-<em>, parse-</em>, unparsed-* etc.)</p>
</div></details></div></div><p>See 3459
            more statuses in yearly archives.</p></article></main></body></html>