<item>
   <title>Pull request #1735 created</title>
   <pubDate>2025-01-27T17:09:40Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/pull/1735</link>
   <guid>https://qt4cg.org/@qt4cg/2025/#created-1735</guid>
   <description>&lt;div&gt;&lt;p&gt;1341 Drop $position callback from many functions&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;Responding to the discussion in #1341, this (somewhat experimental) PR explores the possibility of dropping the optional
$position argument to the callback of many higher-order functions such as some(), every(), filter(), for-each(), fold-left(), fold-right(). Instead, it provides the option to wrap the input sequence in a call of numbered-items() which replaces each item in the input with an (item, position) pair.&lt;/p&gt;
&lt;p&gt;I've done this only (so far) for higher-order sequence functions, but the intent is that the same could be done for arrays and (potentially) maps.&lt;/p&gt;
&lt;p&gt;I left the position argument in place for a few functions where losing it seemed to cause genuine inconvenience:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;partition(), where the function wraps the supplied items into arrays, and you don't want to have to remove the positions afterwards&lt;/li&gt;
&lt;li&gt;subsequence-where(), where many use cases are likely to use positional information&lt;/li&gt;
&lt;li&gt;for-each-pair(), where there are two input sequences and it seems clumsy to associate position information with one or the other&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The main benefit is that we provide one basic mechanism which is automatically available everywhere, which means we don't have to have debates about whether or not there is a use case for adding position information to (say) fold-left or scan-right.&lt;/p&gt;
&lt;p&gt;A further benefit is that the functions defined for sequences automatically become available for arrays and maps. I haven't yet explored the impact on maps and arrays; I will wait first to see what the reaction is to this proposal.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
