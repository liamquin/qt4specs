:PROPERTIES:
:ID:       824FD0F9-4163-423E-9906-F54544ADC2AE
:END:
#+title: QT4 CG Meeting 109 Minutes 2025-02-11
#+author: Norm Tovey-Walsh
#+filetags: :qt4cg:
#+options: html-style:nil h:6 toc:nil
#+html_head: <link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
#+html_head: <link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
#+html_head: <link rel="shortcut icon" href="/img/QT4-64.png" />
#+html_head: <link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
#+html_head: <link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
#+html_head: <link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
#+html_head: <link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
#+options: author:nil email:nil creator:nil timestamp:nil
#+startup: showall

[[../][Meeting index]] / [[https://qt4cg.org][QT4CG.org]] / [[https://qt4cg.org/dashboard][Dashboard]] / [[https://github.com/qt4cg/qtspecs/issues][GH Issues]] / [[https://github.com/qt4cg/qtspecs/pulls][GH Pull Requests]]

#+TOC: headlines 6

* Minutes
:PROPERTIES:
:unnumbered: t
:CUSTOM_ID: minutes
:END:

Approved [[../2025/02-18.html][at meeting 110]] on 18 February 2025.

* Summary of new and continuing actions [0/10]
:PROPERTIES:
:unnumbered: t
:CUSTOM_ID: new-actions
:END:

+ [ ] QT4CG-082-02: DN to work with MK to come to agreement on the fn:ranks proposal
+ [ ] QT4CG-097-02: MK to make the XSD schema component references into links to XSD
+ [ ] QT4CG-107-01: MK to amend PR 1722 so the expansion of focus functions includes the return type ~item()*~
+ [ ] QT4CG-107-05: JLO and DN to consider a proposal for system defined records.
+ [ ] QT4CG-109-01: NW add JSON to the processing model diagrams along side XML
+ [ ] QT4CG-109-02: NW to look again at adding tooltips to the diagrams

* Administrivia
:PROPERTIES:
:CUSTOM_ID: administrivia
:END:

** Roll call [8/13]
:PROPERTIES:
:CUSTOM_ID: roll-call
:END:

Regrets: CG, WP, JLO, BTW.

+ [X] David J Birnbaum (DB)
+ [X] Reece Dunn (RD)
+ [ ] Sasha Firsov (SF)
+ [ ] Christian Grün (CG)
+ [X] Joel Kalvesmaki (JK)
+ [X] Michael Kay (MK)
+ [ ] Juri Leino (JLO)
+ [X] John Lumley (JWL)
+ [X] Dimitre Novatchev (DN)
+ [ ] Wendell Piez (WP)
+ [X] Ed Porter (EP)
+ [ ] Bethan Tovey-Walsh (BTW)
+ [X] Norm Tovey-Walsh (NW). /Scribe/. /Chair/.

** Accept the agenda
:PROPERTIES:
:CUSTOM_ID: agenda
:END:

Proposal: Accept [[../../agenda/2025/02-11.html][the agenda]].

Accepted.

*** Status so far…
:PROPERTIES:
:CUSTOM_ID: so-far
:END:

These charts have been adjusted so they reflect the preceding six months of work.

#+CAPTION: “Burn down” chart on open issues
#+NAME:   fig:open-issues
[[./issues-open-2025-02-11.png]]

#+CAPTION: Open issues by specification
#+NAME:   fig:open-issues-by-spec
[[./issues-by-spec-2025-02-11.png]]

#+CAPTION: Open issues by type
#+NAME:   fig:open-issues-by-type
[[./issues-by-type-2025-02-11.png]]

** Approve minutes of the previous meeting
:PROPERTIES:
:CUSTOM_ID: approve-minutes
:END:

Proposal: Accept [[../../minutes/2025/02-04.html][the minutes of the previous meeting]].

Accepted.

** Next meeting
:PROPERTIES:
:CUSTOM_ID: next-meeting
:END:

The next meeting is planned for 18 February 2025.

CG gives regrets 18 February.

** Review of open action items [6/10]
:PROPERTIES:
:CUSTOM_ID: open-actions
:END:

(Items marked [X] are believed to have been closed via email before
this agenda was posted.)

+ [ ] QT4CG-082-02: DN to work with MK to come to agreement on the fn:ranks proposal
+ [ ] QT4CG-097-02: MK to make the XSD schema component references into links to XSD
+ [X] QT4CG-103-01: MK to add an example of showing all the properties for an untyped node.
  + Withdrawn: “Too difficult”
+ [ ] QT4CG-107-01: MK to amend PR 1722 so the expansion of focus functions includes the return type ~item()*~
+ [X] QT4CG-107-02: MK to propose adding the "duplicates" option (from ~map:merge~) to ~map:build~ and ~map:of-pairs~
+ [X] QT4CG-107-03: MK to propose amending all the functions that return ordered maps so that when duplicates are found, the key of the combined entry is taken from the first of the duplicates.
+ [X] QT4CG-107-04: MK to review CG’s comment to align ~fn:map-merge~ by removing the reference to random number generator and fixing a typo.
+ [ ] QT4CG-107-05: JLO and DN to consider a proposal for system defined records.
+ [X] QT4CG-108-01: JWL look at the extra fn: prefixes introduced by the stylesheets in the binary spec
+ [X] QT4CG-108-02: NW to add links and tooltips to the new processing model diagrams

** Review of open pull requests and issues
:PROPERTIES:
:CUSTOM_ID: open-pull-requests
:END:

*** Blocked
:PROPERTIES:
:CUSTOM_ID: blocked
:END:

The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.

+ PR [[https://qt4cg.org/dashboard/#pr-1587][#1587]]: 557 Add fn:binary-resource
+ PR [[https://qt4cg.org/dashboard/#pr-1296][#1296]]: 982 Rewrite of scan-left and scan-right
+ PR [[https://qt4cg.org/dashboard/#pr-1283][#1283]]: 77b Update expressions
+ PR [[https://qt4cg.org/dashboard/#pr-1062][#1062]]: 150bis revised proposal for fn:ranks
+ PR [[https://qt4cg.org/dashboard/#pr-1227][#1227]]: 150 PR resubmission for fn ranks

*** Merge without discussion
:PROPERTIES:
:CUSTOM_ID: merge-without-discussion
:END:

The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.

+ PR [[https://qt4cg.org/dashboard/#pr-1767][#1767]]: 1729/1737 Fix grammar for "declare record"
+ PR [[https://qt4cg.org/dashboard/#pr-1765][#1765]]: 1751 Clarify BOM handling
+ PR [[https://qt4cg.org/dashboard/#pr-1761][#1761]]: 1752 Correct return type of fn:partition()
+ PR [[https://qt4cg.org/dashboard/#pr-1783][#1783]]: 1779 Make CharRef XQuery-only (added during the meeting)

Proposal: merge these PRs without discussion.

Accepted.

*** Close without action
:PROPERTIES:
:CUSTOM_ID: close-without-action
:END:

It has been proposed that the following issues be closed without action.
If you think discussion is necessary, please say so.

+ Issue [[https://github.com/qt4cg/qtspecs/issues/877][#877]]: Inconsistency in XQFO comparator functions/operators with recursive rules
+ Issue [[https://github.com/qt4cg/qtspecs/issues/755][#755]]: with expression; chaining and concatenation

Proposal: close these issues without further action.

Accepted.

*** Substantive PRs
:PROPERTIES:
:CUSTOM_ID: substantive
:END:

The following substantive PRs were open when this agenda was prepared.

+ PR [[https://qt4cg.org/dashboard/#pr-1769][#1769]]: Add links from processing model diagrams
+ PR [[https://qt4cg.org/dashboard/#pr-1772][#1772]]: 1770 Default priority of rules with a union pattern
+ PR [[https://qt4cg.org/dashboard/#pr-1773][#1773]]: 402 Change the semantics of intersect and except in patterns
+ PR [[https://qt4cg.org/dashboard/#pr-1782][#1782]]: 1776 Add lookup patterns using ? and ??
+ PR [[https://qt4cg.org/dashboard/#pr-1784][#1784]]: 1781 Drop obsolete material from XSLT spec
+ PR [[https://qt4cg.org/dashboard/#pr-1766][#1766]]: 1715 Drop array bound checking
+ PR [[https://qt4cg.org/dashboard/#pr-1783][#1783]]: 1779 Make CharRef XQuery-only
+ PR [[https://qt4cg.org/dashboard/#pr-1778][#1778]]: 1456 Lookup expressions filtered by type
+ PR [[https://qt4cg.org/dashboard/#pr-1763][#1763]]: 1716 Generalize syntax of arrow expressions
+ PR [[https://qt4cg.org/dashboard/#pr-1740][#1740]]: 1725b Further elaboration of duplicates handling in maps
+ PR [[https://qt4cg.org/dashboard/#pr-1735][#1735]]: 1341 Drop $position callback from many functions

* Technical agenda
:PROPERTIES:
:CUSTOM_ID: technical-agenda
:END:

** PR #1769: Add links from processing model diagrams
:PROPERTIES:
:CUSTOM_ID: pr-1769
:END:
See PR [[https://qt4cg.org/dashboard/#pr-1769][#1769]].

ACTION QT4CG-109-01: NW add JSON to the processing model diagrams along side XML

ACTION QT4CG-109-02: NW to look again at adding tooltips to the diagrams

+ NW: This PR is unlikely to run afoul of merge conflicts, so let’s just leave it open.

** PR #1772: 1770 Default priority of rules with a union pattern
:PROPERTIES:
:CUSTOM_ID: pr-1772
:END:
See PR [[https://qt4cg.org/dashboard/#pr-1772][#1772]].

MK introduces the PR.

+ MK: The priority rules for union patterns have become more complicated over time.
  + … Treating them as separate template rules with a different priority has odd
    consequences for ~xsl:next-match~
  + … And in 4.0 we’ve invented new things that are equivalent to union patterns.
  + … Trying to fix various edge cases lead me to take an axe to it.
+ JK: I like the proposal. I tried to replicate the double-triggering of ~xsl:next-match~ but failed.
+ MK: There are test cases that do it, but it’s very obscure.
+ JWL: I agree with this one. If you’re playing around with default priorities
  in unions where it’s starting to get complicated, you have to be on the ball.
  This will simplify things.

Proposal: Merge this PR.

Accepted.

** PR #1773: 402 Change the semantics of intersect and except in patterns
:PROPERTIES:
:CUSTOM_ID: pr-1773
:END:
See PR [[https://qt4cg.org/dashboard/#pr-1773][#1773]].

+ MK: This is in the same area, but is completely separate. These are the rules for matching.
  + … The problem here is that the current specification of intersect and except
    does something so woefully unexpected that we should treat it as bug.
  + … The incompatibility is explained in a note.

Proposal: Merge this PR.

Accepted.

** PR #1782: 1776 Add lookup patterns using ? and ??
:PROPERTIES:
:CUSTOM_ID: pr-1782
:END:
See PR [[https://qt4cg.org/dashboard/#pr-1782][#1782]].

Not ready for discussion.

** PR #1784: 1781 Drop obsolete material from XSLT spec
:PROPERTIES:
:CUSTOM_ID: pr-1784
:END:
See PR [[https://qt4cg.org/dashboard/#pr-1784][#1784]].

+ MK: Hopefully, this is uncontroversial.
  + … A lot of section numbers have changed, so the diff is hard to follow.
  + … Section 23 (processing JSON data) has gone and so has Appendix B (XML representation of JSON)
  + … These were basically historical relics.

Proposal: Merge this PR.

Accepted.

** Issue triage
:PROPERTIES:
:CUSTOM_ID: issue-triage
:END:

*** Issue [[https://github.com/qt4cg/qtspecs/issues/1537][#1537]]: XSLT: local functions within an enclosing xsl:mode
:PROPERTIES:
:CUSTOM_ID: h-F7FABABE-B3F3-4D26-B7B8-96A0BE7086FA
:END:

+ MK: I’d make it optional; I’ve encountered it, and several users have asked.
+ JWL: I think the issue is go for effectively the enclosed mode being a scope;
  in which case functions, variables could be in there. How far do we go?
  + Somtimes you want scoped local variables and you need tunnels all the way down.

*** Issue [[https://github.com/qt4cg/qtspecs/issues/1584][#1584]]: Review the XML Schema and RELAX NG schemas for XSLT 4.0 for compatibility
:PROPERTIES:
:CUSTOM_ID: h-431874BE-254F-4499-ACF5-863D62329A86
:END:

+ NW: I’ll do it closer to the end of the process.

*** Issue [[https://github.com/qt4cg/qtspecs/issues/1631][#1631]]: xsl:apply-templates (without select) should allow inline content
:PROPERTIES:
:CUSTOM_ID: h-2F817CFB-2C99-452C-9742-8C85BBD5CD19
:END:

+ JWL: I think we should drop it; there are easy enough alternatives.
+ MK: I agree.

+ DN: I think we shouldn’t discuss an issue if the original author isn’t present.
+ NW: I think it’s more important to make progress.
+ DN: Then let’s move the triaging of any issues whose original author is not
  present at the meeting to the end of the queue

There were no objections to this rephrased rule for triaging.

*** Issue [[https://github.com/qt4cg/qtspecs/issues/1698][#1698]]: Allow select attribute for xsl:call-template instruction
:PROPERTIES:
:CUSTOM_ID: h-E2EF5877-14B9-4E72-9736-3F15DD4CD2F2
:END:

+ MK: I’ve vacillated on this. When I see an ~xsl:for-each~ just to change the
  context for a template, that’s horrible. But then there’s debate about where
  the context setting goes. Outside, it’s just a different way of spelling “for
  each”. Inside has more appeal but is less generic.
+ JK: I vote “required-optional”. We can already do this, but maybe someone will
  write a proposal.
+ RD: I concur it should be optional. I wonder if it’s more expressive to have
  the with-context as an equivalent of with-param. Putting the context within
  the call-template.
+ MK: That’s one of the suggestions.
+ MK: Another question here is to what extent we want to integrate the idea of a
  context value in to XSLT. It was introduced for XQuery because people doing
  databases have always wanted an expression beginning with “/” to search the
  whole database not just one document.
  + … If we’re adding the ability to set the context here, do we want to allow
    it to be a general value not just an item.
+ JWL: When talking about where the select would go, do we still have the
  proposal for a form of call-template that’s an extension of an expression?
+ MK: Yes, there’s probably a relation to it.

*** Issue [[https://github.com/qt4cg/qtspecs/issues/1724][#1724]]: Allow @copy-namespaces on <xsl:mode>?
:PROPERTIES:
:CUSTOM_ID: h-D2ED69CD-C8C7-4752-AD19-8FE7CB10E86C
:END:

+ JK: For the purposes for triage, I’d vote optional.
+ MK: I think my main reservation is that when people want to remove namespaces,
  they don’t quite know what they’re asking for.
  + … The related issues have to do with copying with a change of namespace.
+ DB: That’s related, but I don’t think it subsumes this issues.

*** Issue [[https://github.com/qt4cg/qtspecs/issues/1742][#1742]]: Maps constructed using streamed xsl:fork instruction should not be ordered
:PROPERTIES:
:CUSTOM_ID: h-501EC430-48CB-4CF3-BAC4-E28E32D8CD87
:END:

+ MK: In a sense, it’s subsumed by a general issue that we have to review
  streamability. We’ve neglected the whole area.
  + … We can’t close this without some resolution.

*** Issue [[https://github.com/qt4cg/qtspecs/issues/1777][#1777]]: Shallow copy in XSLT with maps and arrays
:PROPERTIES:
:CUSTOM_ID: h-4606BAC9-9EEC-449F-BBB1-A81B951AAFCF
:END:

+ MK: This is the area I’m currently working on. It’s required that we do
  something in this area.
  + … I’m currently trying to write a recursive decent processor on JSON that I
    hope will inform proposals in this area.

* Any other business
:PROPERTIES:
:CUSTOM_ID: any-other-business
:END:

None heard.

* Adjourned
:PROPERTIES:
:CUSTOM_ID: adjourned
:END:


