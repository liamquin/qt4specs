<item>
   <title>Issue #1797 created</title>
   <pubDate>2025-02-12T16:20:09Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/1797</link>
   <guid>https://qt4cg.org/@qt4cg/2025/#created-1797</guid>
   <description>&lt;div&gt;&lt;p&gt;elements-to-maps: separate function to construct a plan&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;I propose separating out the &lt;code&gt;uniform=true&lt;/code&gt; option of &lt;code&gt;elements-to-maps()&lt;/code&gt; into a separate function. This function analyses the data and produces a conversion plan, which can be supplied to the "layouts" option (perhaps renamed) of the main function.&lt;/p&gt;
&lt;p&gt;The benefits are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The plan can be tweaked after it is created by manual adjustment, for example if the user wants to use "empty-plus" layout wherever the system's choice would be "empty", or to take account of anticipated future changes in the structure.&lt;/li&gt;
&lt;li&gt;The plan can be used to process documents that did not exist at the time it was created, thus ensuring that future documents are all converted in the same way, and avoiding the overhead of rebuilding the plan each time.&lt;/li&gt;
&lt;li&gt;The plan can be created from a small sample of the documents to be converted.&lt;/li&gt;
&lt;li&gt;The plan can be created from a large collection of documents including documents that don't need to be converted but which may contain structural elements that are not revealed by the documents that need converting now.&lt;/li&gt;
&lt;li&gt;The user can examine the plan to see what it is doing, which is useful for diagnostics.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We should define the format of the plan (a map from element names to layouts) so that it can conveniently be serialized as a JSON document.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
